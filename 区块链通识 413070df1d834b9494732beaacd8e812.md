# 区块链通识

## 通识

区块链从功能上来说就是分布式账本

网络没有中心，网络里有某种机制生成一个唯一真实的账本，所有节点都可以拥有它的副本。

在这种机制下，账本里的任何改动都会在极短时间内在所有的副本中被反映出来。以此可见这种机制或者是分布式账本技术的可靠性。

具体原理可以看廖雪峰的区块链教程： [https://www.liaoxuefeng.com/wiki/1207298049439968](https://www.liaoxuefeng.com/wiki/1207298049439968)

## 一个有趣的反观点：

![Untitled](%E5%8C%BA%E5%9D%97%E9%93%BE%E9%80%9A%E8%AF%86%20413070df1d834b9494732beaacd8e812/Untitled.png)

## 区块链与分布式数据库的区别： 拜占庭容错。

## 区块链存储机制

区块链并没有服务器这一概念。区块链是靠许多节点来验证数据的，你也可以将每个节点视为一个服务器，每个全节点都保存有完整的 历史区块数据（可以理解为服务器的数据库）。

区块链网络中的每一个节点，就相当于存储所有区块数据的每一台电脑或者服务器终端。所有新区块的生产，以及交易的验证与记帐，并将其广播给全网同步，都由节点来完成。 

简单地说，节点就是埋头干活的。而且公有链上所有的节点都会抢着干活，因为只有优先抢到记帐权，系统才会生成加密货币给予奖励。 

节点，就是我们俗称的矿工。每个矿工的不同算力，决定了它能分配到多少记帐权，收获多少奖励。

## 超级节点与选举

要说起 BRC 的超级节点，就不得不从区块链的共识机制说起。 由于所有的公有链都是**社区自治**，没有中心领导来决策，为了维护公有链，必须多数社区用户达成一致意见。而如何达成，就是[共识机制](https://www.zhihu.com/search?q=%E5%85%B1%E8%AF%86%E6%9C%BA%E5%88%B6&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%22368060970%22%7D)。

 区块链第一代共识机制叫 **POW**，就是**工作量证明共识机制，俗称挖矿**。要想生产新的区块，就必须进行成千上万次**哈希碰撞**的运算。而这些运算，会消耗很多电力，造成能源浪费，因此也倍受垢病。更让大家担心的是，一旦大部分算力被垄断，去中心化就受到威胁。 

第二代共识机制叫 **POS**，就是**权益证明共识机制**，它是**根据持币数量与时间来决定谁拥有更多的记帐权**。这种共识机制的优点是可以避免能源消耗，但缺点是话语权都被持币大户所掌控，形成**中央集权**的特征，也与区块链去中心化的初衷背道而驰。 

第三代共识机制就是 **DPOS**，DPOS 共识最大的特征，就是在 POS 权益证明的基础之上，加入了现实世界中**议会选举制度**。从 **100** 个[备用节点](https://www.zhihu.com/search?q=%E5%A4%87%E7%94%A8%E8%8A%82%E7%82%B9&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%22368060970%22%7D)中，经过所有**持币用户投票选举**诞生的**最终获得记帐权的 21 个节点**。 

**超级节点有什么特征与优势？**

 **超级节点就是 DPOS 共识的具体实践。**首先，由于使用了去中心化的投票机制，DPOS 相比其他的共识算法更加**民主化**，不容易被持币大户垄断话语权。 **21 个超级节点**的产生，都由公平、公正的投票产生 。如果 21 个节点代表不能履行他们的职责，比如说当轮到他们工作时，没能及时生成区块，他们就会被除名，再由社区选出新的超级节点来替代。 

其次，**由于减少了节点数量，21 个超级节点运算的效率更高** 。据称在最理想的状态下可以实现**每秒百万级的 TPS**。这就完爆了现在所有公有链的运行效率，前途不可估量。

虽然总的来说超级节点数量不多，牺牲了部分“去中心化”成分，但是并不会因此导致中心化的弊端 ，因为任何一个节点不遵守**宪法**的超级节点，就会被民主投票将其否决撤换。 

另外，**这 21 个节点的出块顺序，以及对全网交易的审核顺序全部由系统随机设定，并且随时会变，这样既能有效率地升级，同时能够防范作弊、硬分叉**。

最后要特别讲到的是，**超级节点数量可以灵活变通，并不是永恒不变的**，当超级节点的数量不能够满足项目发展时，社区可以发起投票来**增加**节点数量。 

**超级节点选举：**

超级节点的选举过程与现实中的选举过程类似，只不过**在超级节点选举过程中是每个代币一票而非一人一票。**持币人会通过项目方开发的智能合约在投票系统中完成投票。根据项目方源码中投票系统部分的代码，能够看出一些投票机制。

## 私链、联盟链、公链

首先，从中心化程度来讲，区块链主要分成三种。

- 对于私链来讲，可以采用 RAFT 等传统的分布式系统共识算法，根本就谈不上去中心化。
- 对于联盟链来讲，参与记账的节点一般都是事先定好的，或者是由这些已经定好的节点协议添加的。当然，不同的共识机制会有些差别。名义上叫“弱中心化”。
- 只有公链，才有资格被列入“去中心化”的讨论对象。让我们看看不同共识机制的“去中心化程度”

## ETH2.0

显卡挖矿：

> **上到2080/3070下到GTX750ti，从2月底开始，挖矿都是没有正收益的。去除电费跟成本，都是赔。这也是显卡持续跌价的原因。**
> 

全网算力达到900TH/S后，挖掘ETC的成本就在短短几个月翻了几千倍。这就是加卡的威力。这也是以太坊目前碰到的问题，是一个无解的问题，也是所有区块链虚拟货币产品达到一定数量都无法解决的问题。算力太少无法支撑币价，算力太多挖掘新币难度越来越大。而越往后挖掘新币越难，他们就要想新的办法渡过眼前危机，让这个市场继续下去。而ETH维持币价的办法很简单，有计划的大规模销毁以太币。当然在全网天文数字的算力面前，这种饮鸩止渴是没多少用处的。

那好了，显卡挖矿难以为继的原因总结下就是：

1，随着全网算力增加，挖出新币的难度越来越大，况且是大家一窝蜂挖矿的情况下，挖新币难度每天都在大幅度增加，截至现在，绝大多数显卡(90%以上)开机就是赔电费；

2，全网算力再翻一倍到2000TH/S，挖掘难度会翻万倍。显卡的算力是实在也不足以支撑这个繁荣了。那如何继续让以太币还能繁荣呢？其实也不难，就是更省电的情况下，算力继续增加，在未来二三年翻两倍算力，而显卡是不足以应付这个需求的。那就有了ETH2.0的需求。

什么是 ETH2.0 呢？简单说就是矿机代替显卡。为啥矿机代替显卡呢？举个例子，以英特尔矿机Bonanza Mine为标准，采用英特尔7工艺制造，一颗芯片功耗2.5W，算力137GH/S。对你没有看错，算力是137G，不是M。功耗是2.5W不是2.5KW。也就是说，一颗英特尔矿机，挖矿效率是2080TI的3万多倍，功耗不到2080ti的百分之一。

为何矿机如此有效率而ETH以前不用呢？因为在ETH全网算力低的时候，显卡是很适合的，矿机不菲的成本制约了它的发展。比如英特尔矿机，人家是一组25颗芯片一起卖，一组采购价是40多万美元。这对于铺开阶段的产品不适合。当ETH规模如此的时候，只能借助于矿机才能维持繁荣了。

## 区块链架构（L1、L2）

Layer1和Layer2的概念并不单单指的是以太坊网络，而业内借鉴计算机网络通信体系架构的OSI模型（Open System Interconnection Reference Model，即开放式系统互联通信参考模型），将区块链逻辑架构划分为三层——Layer0、Layer1和Layer2。

其中第 0 层对应OSI模型的底层协议，大致包括**物理层、数据链路层、网络层和传输层**。

第一层（Layer 1）大致包括数据层、共识层和激励层。

而第2层（Layer 2）则主要包括合约层和[应用层](https://www.zhihu.com/search?q=%E5%BA%94%E7%94%A8%E5%B1%82&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%22410557922%22%7D)。

按照这个维度来划分，像我们所熟悉的比特币网络、以太坊主网等主流公链都属于 Layer 1的范畴。

只不过，由于在当前众多的公链项目中，以太坊是运行智能合约、DAPP 最多的公链，也是锁仓资产价值和日均交易量最大的公链，所以在有关以太坊网络Layer1和Layer2不同扩容方案的讨论也是最多的，所以在本文中，如没有特殊说明，所提到的Layer1和Layer2一般以以太坊为主。

通俗来说，在以太坊网络中，Layer 1的主要作用就是确保网络安全、去中心化及最终状态确认，做到状态共识，并作为一条公链网络中可信的“加密法院”，通过智能合约设计的规则进行仲裁，以经济激励的形式将信任传递到 Layer2 上；

而Layer2 则以追求更高效的性能为终极目标，作为第二层网络，可以替 Layer1 承担大部分计算工作，近年来，不少项目都是基于Layer2搭建的，从而将交易行为从主链上分离出来，降低一层网络的负担，提高业务处理效率，从而实现扩容。在这个过程中，Layer2 虽然只做到了局部共识，但是基本可以满足各类场景的需求。

[以太坊知识点总结](%E5%8C%BA%E5%9D%97%E9%93%BE%E9%80%9A%E8%AF%86%20413070df1d834b9494732beaacd8e812/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%2080f6808f24f143e5a83ebfd2a6b39730.md)

[拜占庭容错](%E5%8C%BA%E5%9D%97%E9%93%BE%E9%80%9A%E8%AF%86%20413070df1d834b9494732beaacd8e812/%E6%8B%9C%E5%8D%A0%E5%BA%AD%E5%AE%B9%E9%94%99%205e71ea2c641441dcb4bdbb08ac5c7e91.md)

[去中心化身份 DID](%E5%8C%BA%E5%9D%97%E9%93%BE%E9%80%9A%E8%AF%86%20413070df1d834b9494732beaacd8e812/%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96%E8%BA%AB%E4%BB%BD%20DID%2087521c845c8248d08d598c6ceb9aa2f5.md)

[****IBC 跨链通信****](%E5%8C%BA%E5%9D%97%E9%93%BE%E9%80%9A%E8%AF%86%20413070df1d834b9494732beaacd8e812/IBC%20%E8%B7%A8%E9%93%BE%E9%80%9A%E4%BF%A1%20500e98b8104b46b79bd4564140028bf2.md)

From：

- 区块链节点与超级节点 - 2020.php的文章 - 知乎
[https://zhuanlan.zhihu.com/p/368060970](https://zhuanlan.zhihu.com/p/368060970)
- 为什么以太坊2.0比预计来得快？ - 圆菠萝手柄的文章 - 知乎
[https://zhuanlan.zhihu.com/p/488043978](https://zhuanlan.zhihu.com/p/488043978)
- 区块链layer1和layer2的解读！ - Vicoin的文章 - 知乎
[https://zhuanlan.zhihu.com/p/410557922](https://zhuanlan.zhihu.com/p/410557922)