# 以太坊知识点总结

## **智能合约是在 Ethereum 生态系统中如何完成的？**

当有人想要在以太坊完成一项特定任务时，他们会与一个或多个人发起智能合约。

智能合约是一系列指令，使用编程语言“ solidity” 编写，该编程语言基于IFTTT逻辑（即IF-THIS-THEN-THAT逻辑工作：如果符合某个条件则做某件事情）。基本上，如果完成了第一组指令，那么执行下一个功能，然后执行下一个功能，并继续重复，直到达到合同结束。

## EVM **以太坊虚拟机**

在我们了解以太坊虚拟机（EVM）之前，我们必须了解为什么需要“虚拟机”。

那么让我们回到智能合约。

我们希望在我们的智能合约中有哪些理想的属性？

任何在区块链上运行的东西都必须是不可变的，并且必须能够在不损害其完整性的情况下运行多个节点。因此，智能合约功能需要三个特性

- 确定性。
- 可终止。
- 隔离性。(将合同隔离在沙箱中以保护整个生态系统)

**只要以太坊区块链上有交易发生，以太坊虚拟机就会执行以下流程：**
1、确认转账额是否正确、验证签名的有效性、

验证该交易的 nonce （防止交易重播的序号） 是否与该特定交易帐户的 nonce 匹配。如果存在不匹配，交易将返回。

2、计算转账所需的费用，并收取Gas。

3、运行转账操作。

EVM是所有智能合约在以太坊中运作的虚拟机器。它是一个简单而强大的图灵完备的 [256位虚拟机](https://www.zhihu.com/search?q=256%E4%BD%8D%E8%99%9A%E6%8B%9F%E6%9C%BA&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%2234749723%22%7D)。图灵完备意味着在给定资源和内存的情况下，EVM中执行的任何程序都可以解决任何问题。

为了在 EVM 中编写智能合约，需要学习编程语言 **Solidity** 。

## **Solidity**

对于想要学习如何创建智能合约的人来说，Solidity 是绝对必要的。Gavin Wood，Christian Reitwiessner，Alex Beregszaszi，Yoichi Hirai和几位以前的以太坊核心成员开发了Solidity，以便在区块链平台（如以太坊）撰写智能合约。

Solidity 是一种面向对象的语言，语法非常类似于 ECMAScript（Javascript）。从以太坊设计原理文档中，我们需要记住一些关键点，即我们正在使用32字节指令字大小的堆栈和内存模型，EVM（以太坊虚拟机）使我们能够访问程序“堆栈“，它就像一个寄存器空间，我们也可以粘贴存储器地址，使[程序计数器](https://www.zhihu.com/search?q=%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%2234749723%22%7D)循环/跳转（用于顺序程序控制，EVM需要智能合约中的完全确定性。

**（注意：[以太坊计划](https://www.zhihu.com/search?q=%E4%BB%A5%E5%A4%AA%E5%9D%8A%E8%AE%A1%E5%88%92&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A%2234749723%22%7D)最终从*Solidity*转移到*Viper*。）**

## ETH2.0

显卡挖矿：

> **上到2080/3070下到GTX750ti，从2月底开始，挖矿都是没有正收益的。去除电费跟成本，都是赔。这也是显卡持续跌价的原因。**
> 

全网算力达到900TH/S后，挖掘ETC的成本就在短短几个月翻了几千倍。这就是加卡的威力。这也是以太坊目前碰到的问题，是一个无解的问题，也是所有区块链虚拟货币产品达到一定数量都无法解决的问题。算力太少无法支撑币价，算力太多挖掘新币难度越来越大。而越往后挖掘新币越难，他们就要想新的办法渡过眼前危机，让这个市场继续下去。而ETH维持币价的办法很简单，有计划的大规模销毁以太币。当然在全网天文数字的算力面前，这种饮鸩止渴是没多少用处的。

那好了，显卡挖矿难以为继的原因总结下就是：

1，随着全网算力增加，挖出新币的难度越来越大，况且是大家一窝蜂挖矿的情况下，挖新币难度每天都在大幅度增加，截至现在，绝大多数显卡(90%以上)开机就是赔电费；

2，全网算力再翻一倍到2000TH/S，挖掘难度会翻万倍。显卡的算力是实在也不足以支撑这个繁荣了。那如何继续让以太币还能繁荣呢？其实也不难，就是更省电的情况下，算力继续增加，在未来二三年翻两倍算力，而显卡是不足以应付这个需求的。那就有了ETH2.0的需求。

什么是 ETH2.0 呢？简单说就是矿机代替显卡。为啥矿机代替显卡呢？举个例子，以英特尔矿机Bonanza Mine为标准，采用英特尔7工艺制造，一颗芯片功耗2.5W，算力137GH/S。对你没有看错，算力是137G，不是M。功耗是2.5W不是2.5KW。也就是说，一颗英特尔矿机，挖矿效率是2080TI的3万多倍，功耗不到2080ti的百分之一。

为何矿机如此有效率而ETH以前不用呢？因为在ETH全网算力低的时候，显卡是很适合的，矿机不菲的成本制约了它的发展。比如英特尔矿机，人家是一组25颗芯片一起卖，一组采购价是40多万美元。这对于铺开阶段的产品不适合。当ETH规模如此的时候，只能借助于矿机才能维持繁荣了。

## **DAPP**

目前（2022）， 大多数的手机 app 都是由一个中心化的平台来进行运营监管的，其带来便利的同时也引发了一些潜在的问题。例如数据侵犯用户隐私问题，信息的对称性无法保证以及用户之间的公平公正问题等等。

应用：

1. 去中心化交易
2. 游戏菠菜（博彩）
3. **加密收藏品**
4. **找回钱包（其主要功能是将手机号绑定钱包地址避免遗忘助记词而导致的钱包遗失。）**
5. **平行链、上贷链**

**DAPP未来的发展**

1.  商品数字化：

商家可以通过提前发行通证来进行超前预售，对于特定的季节性产品可以通过token实现商品在市场中的提前流通，同时减少了不必要的仓储成本和假货造成的信任危机。因为通证即是商品的提货权，商品与发行的通证一一对应。从而实现了先消费后生产的物联网消费生态体系。

2.  DAPP+电商平台：

1． 商家信息商品信息物流等全程可溯源防伪

2． 积分数字化，分布式记账。防篡改

3． 积分互兑，通过DAPP积分将不受限制的自由流通，不仅仅局限于一个平台之下，实现流转透明，逐笔清算，资源互通。

From：

- https://zhuanlan.zhihu.com/p/130879202
- EVM是什么，在以太坊中扮演什么角色？ - Bitchecker的文章 - 知乎
[https://zhuanlan.zhihu.com/p/423081459](https://zhuanlan.zhihu.com/p/423081459)